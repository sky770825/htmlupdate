<!-- åœ¨é€™è£¡è²¼ä¸Šä½ çš„ HTMLï¼Œæˆ–é»ã€è¼‰å…¥ç¯„<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ§¡ HTML é è¦½å™¨ï½œé˜¿è²´æ ¡é•·å°åŠ©æ‰‹</title>

  <!-- å–®æª”ç‰ˆï¼šä¸ä¾è³´å¤–éƒ¨ CSSï¼›æ­¤å€ç‚ºã€ŒBootswatch é¢¨æ ¼éˆæ„Ÿã€ä¸»é¡Œï¼ˆæš–è‰²ç³»ï¼‰ -->
  <style>
    /* ====== åŸºç¤è¨­å®šï¼šå­—å‹/ç›’æ¨¡å‹/RWD å®‰å…¨å¯¬åº¦ ====== */
    :root{
      --bg:#fff7f0;
      --card:#ffffff;
      --text:#5c3b2e;
      --muted:#8d6e63;
      --primary:#ff7043;   /* ä¸»è‰²ï¼šæš–æ©˜ */
      --primary-700:#f4511e;
      --accent:#ffd54f;    /* é»ç¶´ï¼šæš–é»ƒ */
      --ok:#43a047;
      --warn:#fdd835;
      --danger:#e53935;
      --shadow:0 10px 25px rgba(0,0,0,.08);
      --radius:18px;
    }
    *{ box-sizing:border-box; }
    input, select, textarea{ max-width:100%; }

    html,body{
      height:100%;
      margin:0;
      background:linear-gradient(180deg, var(--bg), #fff9f3 45%, #fff);
      font-family:"Microsoft JhengHei", system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans TC", sans-serif;
      color:var(--text);
    }

    /* ====== ç‰ˆé¢ï¼šä¸Šæ–¹å°è¦½ + ä¸»å€ï¼ˆRWDï¼šæ‰‹æ©Ÿç›´æ¬„ã€æ¡Œæ©Ÿé›™æ¬„ï¼‰ ====== */
    .topbar{
      position:sticky; top:0; z-index:5;
      background: #ffffffcc;
      backdrop-filter: blur(6px);
      border-bottom: 1px solid #f3e0d7;
    }
    .bar-wrap{
      max-width:1200px; margin:auto; padding:12px 16px;
      display:flex; align-items:center; gap:12px; flex-wrap:wrap;
    }
    .brand{
      display:flex; align-items:center; gap:10px; font-weight:800;
      color:var(--primary-700);
      letter-spacing:.5px;
    }
    .brand .logo{
      width:36px; height:36px; border-radius:50%;
      display:grid; place-items:center;
      background: radial-gradient(ellipse at top, var(--accent), #ffc06b);
      box-shadow: var(--shadow);
      font-size:20px;
    }

    .toolbar{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin-left:auto; }

    .btn{
      border:none; padding:10px 14px; border-radius:14px; cursor:pointer;
      background:var(--primary); color:#fff; font-weight:700;
      box-shadow: 0 6px 16px rgba(244,81,30,.25);
      transition:.2s transform, .2s box-shadow, .2s background;
      display:inline-flex; align-items:center; gap:8px;
    }
    .btn:hover{ transform:translateY(-1px); box-shadow:0 10px 22px rgba(244,81,30,.28); background:var(--primary-700); }
    .btn.ghost{ background:#fff; color:var(--muted); border:1px solid #efdcd3; box-shadow:none; }
    .btn.ghost:hover{ background:#fff7f0; }
    .btn.ok{ background:var(--ok); box-shadow:0 6px 16px rgba(67,160,71,.25); }
    .btn.warn{ background:var(--warn); color:#7a5b00; }
    .btn.danger{ background:var(--danger); }

    .main{
      max-width:1200px; margin:18px auto; padding:0 16px 24px;
      display:grid; gap:16px;
      grid-template-columns:1fr; /* æ‰‹æ©Ÿç›´æ¬„ */
    }
    @media(min-width:980px){
      .main{ grid-template-columns:1fr 1fr; } /* æ¡Œæ©Ÿé›™æ¬„ */
    }

    /* ====== å¡ç‰‡ ====== */
    .card{
      background:var(--card);
      border:1px solid #f1e0d7;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      display:flex; flex-direction:column;
    }
    .card-header{
      padding:14px 16px; display:flex; align-items:center; gap:10px;
      background:linear-gradient(180deg, #fff, #fff7f1 70%);
      border-bottom:1px solid #f3e0d7;
      font-weight:800; color:#6b3b2e;
    }
    .card-body{ padding:16px; }
    .muted{ color:#896b5f; }

    /* ====== ç·¨è¼¯å™¨å€ ====== */
    .editor-wrap{ display:flex; flex-direction:column; gap:10px; height:100%; }
    .code-actions{ display:flex; gap:8px; flex-wrap:wrap; }
    textarea#editor{
      width:100%; min-height:380px; resize:vertical;
      font-family: ui-monospace,SFMono-Regular,Menlo,Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      line-height:1.5; font-size:14px; padding:14px 16px;
      border:1px dashed #e7c9bc; border-radius:14px; background:#fffdfb;
      outline:none;
    }
    textarea#editor:focus{ border-color:#ffb199; box-shadow:0 0 0 4px #ffe3d9; }

    /* æ‹–æ‹‰ä¸Šå‚³å€æç¤º */
    .dropzone{
      border:2px dashed #ffb199; border-radius:14px; padding:12px; text-align:center;
      background:#fff6f0; color:#a06652; font-weight:700;
    }
    .dropzone.dragover{ background:#ffe9df; }

    /* ====== é è¦½å€ ====== */
    .preview-frame{
      width:100%; height:480px; border:none; border-top:1px solid #f3e0d7;
      background:#fff; border-radius:12px;
    }
    .frame-tools{ display:flex; gap:8px; flex-wrap:wrap; margin-bottom:8px; }

    /* ====== å°å¾½ç« /æç¤º ====== */
    .badge{
      display:inline-block; padding:4px 10px; border-radius:999px; font-size:12px; font-weight:800;
      background:#fff3cd; color:#7a5b00; border:1px solid #f6e1a6;
    }

    /* ====== å°å­—èªªæ˜ ====== */
    .help{
      font-size:13px; line-height:1.6; color:#7b5f55;
    }
  </style>
</head>
<body>
  <!-- ====== é ‚ç«¯å·¥å…·åˆ— ====== -->
  <header class="topbar">
    <div class="bar-wrap">
      <div class="brand">
        <div class="logo">ğŸ§¡</div>
        <div>HTML é è¦½å™¨ <span class="badge">SandBox</span></div>
      </div>

      <div class="toolbar">
        <!-- ä¸»è¦åŸ·è¡ŒæŒ‰éˆ• -->
        <button class="btn" id="runBtn">ğŸš€ åŸ·è¡Œ</button>
        <button class="btn ghost" id="openSampleBtn">ğŸ“„ è¼‰å…¥ç¯„ä¾‹</button>
        <label class="btn ghost" for="fileInput" style="cursor:pointer;">ğŸ“‚ è¼‰å…¥ .html<input id="fileInput" type="file" accept=".html,text/html" hidden></label>
        <button class="btn ok" id="downloadBtn">ğŸ’¾ ä¸‹è¼‰</button>
        <button class="btn warn" id="copyBtn">ğŸ“‹ è¤‡è£½</button>
        <button class="btn danger" id="clearBtn">ğŸ§¹ æ¸…ç©º</button>
      </div>
    </div>
  </header>

  <!-- ====== ä¸»é«”ï¼šå·¦ç·¨å³é è¦½ ====== -->
  <main class="main">
    <!-- å·¦ï¼šç·¨è¼¯å™¨å¡ç‰‡ -->
    <section class="card">
      <div class="card-header">ğŸ“ ç¨‹å¼ç·¨è¼¯å€</div>
      <div class="card-body">
        <div class="dropzone" id="dropzone">æŠŠ .html æª”æ‹–é€²ä¾†ï¼Œæˆ–ç›´æ¥åœ¨ä¸‹æ–¹è²¼ä¸Š HTML / CSS / JS å…§å®¹</div>
        <div class="editor-wrap" style="margin-top:10px;">
          <textarea id="editor" spellcheck="false" placeholder="åœ¨é€™è£¡è²¼ä¸Šå®Œæ•´çš„ HTMLï¼ˆå¯åŒ…å« &lt;style&gt; èˆ‡ &lt;script&gt;ï¼‰"></textarea>
          <div class="code-actions">
            <button class="btn" id="runBtn2">â–¶ï¸ åŸ·è¡Œé è¦½</button>
            <button class="btn ghost" id="beautifyBtn">âœ¨ ç°¡æ˜“æ’ç‰ˆ</button>
          </div>
          <p class="help">æç¤ºï¼šæ­¤é è¦½å™¨ä½¿ç”¨ <b>iframe sandbox</b> éš”é›¢é è¦½å…§å®¹ï¼ˆå…è¨± script / modalsï¼‰ï¼Œé¿å…å½±éŸ¿æœ¬é åŠŸèƒ½ã€‚</p>
        </div>
      </div>
    </section>

    <!-- å³ï¼šé è¦½å¡ç‰‡ -->
    <section class="card">
      <div class="card-header">ğŸ‘€ å³æ™‚é è¦½å€</div>
      <div class="card-body">
        <div class="frame-tools">
          <button class="btn ghost" id="openNewTabBtn">ğŸªŸ å¦é–‹è¦–çª—</button>
          <span class="muted">é è¦½å°ºå¯¸å›ºå®š 480px é«˜ï¼Œå…§å®¹è¶…å‡ºå¯è‡ªè¡Œæ²å‹•ã€‚</span>
        </div>
        <iframe id="preview" class="preview-frame"
                sandbox="allow-scripts allow-modals allow-forms allow-popups allow-pointer-lock allow-same-origin"
                srcdoc="<!-- æŒ‰ä¸Šæ–¹ã€åŸ·è¡Œã€å³å¯é è¦½ -->">
        </iframe>
      </div>
    </section>
  </main>

  <!-- ====== äº’å‹•è…³æœ¬ ====== -->
  <script>
    // å–å¾—å…ƒç´ 
    const editor = document.getElementById('editor');
    const preview = document.getElementById('preview');
    const runBtn = document.getElementById('runBtn');
    const runBtn2 = document.getElementById('runBtn2');
    const openSampleBtn = document.getElementById('openSampleBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    const copyBtn = document.getElementById('copyBtn');
    const clearBtn = document.getElementById('clearBtn');
    const openNewTabBtn = document.getElementById('openNewTabBtn');
    const fileInput = document.getElementById('fileInput');
    const dropzone = document.getElementById('dropzone');
    const beautifyBtn = document.getElementById('beautifyBtn');

    /* ========== 1) åŸ·è¡Œé è¦½ï¼šæŠŠ textarea å…§å®¹å¡é€² iframe çš„ srcdoc ========== */
    function runPreview(){
      const code = editor.value || "<!doctype html><html><body><h2>ï¼ˆæ²’æœ‰å…§å®¹ï¼‰</h2><p>è«‹è²¼ä¸Šä½ çš„ HTML å¾Œå†æŒ‰ã€åŸ·è¡Œã€ï¼</p></body></html>";
      preview.srcdoc = code;
      // å°å‹•ç•«æç¤º
      preview.style.transition = '.2s filter'; preview.style.filter='contrast(1.15)';
      setTimeout(()=>preview.style.filter='contrast(1)', 200);
    }
    runBtn.addEventListener('click', runPreview);
    runBtn2.addEventListener('click', runPreview);

    /* ========== 2) å¦é–‹è¦–çª—ï¼šç”¨ data URL æ‰“é–‹ç›®å‰å…§å®¹ ========== */
    openNewTabBtn.addEventListener('click', ()=>{
      const code = editor.value || "";
      const blob = new Blob([code], {type:"text/html;charset=utf-8"});
      const url = URL.createObjectURL(blob);
      window.open(url, '_blank');
      // è¨»ï¼šä½¿ç”¨ Blob URL å¯é¿å…ç¶²å€éé•·èˆ‡ç·¨ç¢¼å›°æ“¾
    });

    /* ========== 3) è¼‰å…¥ç¯„ä¾‹ï¼šæä¾›ä¸€ä»½ç°¡å–®å¯äº’å‹•çš„ HTML ========== */
    const sampleHTML =
`<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>æˆ‘çš„å°å¡ç‰‡</title>
<style>
  body{font-family:"Microsoft JhengHei",sans-serif;background:#fff3e0;margin:0;display:grid;place-items:center;height:100vh;}
  .card{background:#fff;border:1px solid #ffe0b2;border-radius:16px;box-shadow:0 8px 20px rgba(0,0,0,.08);padding:24px;max-width:420px}
  .title{font-weight:900;color:#e65100;margin:0 0 10px 0}
  .btn{border:none;background:#ff7043;color:#fff;padding:10px 14px;border-radius:12px;font-weight:800;cursor:pointer}
  .btn:hover{background:#f4511e}
</style>
</head>
<body>
  <div class="card">
    <h2 class="title">ğŸŠ Hello HTML Preview!</h2>
    <p>é€™æ˜¯å¾é è¦½å™¨è¼‰å…¥çš„ç¯„ä¾‹ï¼Œä½ å¯ä»¥ä¿®æ”¹æ–‡å­—æˆ–æ¨£å¼å¾Œå†æŒ‰ã€ŒåŸ·è¡Œã€ã€‚</p>
    <button class="btn" onclick="alert('Hi!')">é»æˆ‘ä¸€ä¸‹</button>
  </div>
</body>
</html>`;
    openSampleBtn.addEventListener('click', ()=>{
      editor.value = sampleHTML;
      runPreview();
    });

    /* ========== 4) è¼‰å…¥æœ¬æ©Ÿ HTML æª” ========== */
    fileInput.addEventListener('change', (e)=>{
      const file = e.target.files?.[0];
      if(!file) return;
      const reader = new FileReader();
      reader.onload = () => {
        editor.value = reader.result;
        runPreview();
      };
      reader.readAsText(file, 'utf-8');
    });

    /* ä¹Ÿæ”¯æ´æ‹–æ‹‰åˆ° dropzone */
    function setDragOver(on){
      dropzone.classList.toggle('dragover', !!on);
      dropzone.textContent = on ? "æ”¾é–‹æ»‘é¼ å³å¯è¼‰å…¥ .html æª”" : "æŠŠ .html æª”æ‹–é€²ä¾†ï¼Œæˆ–ç›´æ¥åœ¨ä¸‹æ–¹è²¼ä¸Š HTML / CSS / JS å…§å®¹";
    }
    ['dragenter','dragover'].forEach(evt=>{
      dropzone.addEventListener(evt, (e)=>{ e.preventDefault(); e.stopPropagation(); setDragOver(true); });
    });
    ['dragleave','drop'].forEach(evt=>{
      dropzone.addEventListener(evt, (e)=>{ e.preventDefault(); e.stopPropagation(); setDragOver(false); });
    });
    dropzone.addEventListener('drop', (e)=>{
      const file = e.dataTransfer?.files?.[0];
      if(!file) return;
      const reader = new FileReader();
      reader.onload = ()=>{ editor.value = reader.result; runPreview(); };
      reader.readAsText(file, 'utf-8');
    });

    /* ========== 5) ä¸‹è¼‰ç›®å‰ç·¨è¼¯å…§å®¹æˆ .html æª” ========== */
    downloadBtn.addEventListener('click', ()=>{
      const code = editor.value || '';
      const blob = new Blob([code], {type:"text/html;charset=utf-8"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = "my_preview.html";
      document.body.appendChild(a); a.click(); a.remove();
      URL.revokeObjectURL(url);
    });

    /* ========== 6) ä¸€éµè¤‡è£½ç¨‹å¼ç¢¼ ========== */
    copyBtn.addEventListener('click', async ()=>{
      try{
        await navigator.clipboard.writeText(editor.value||'');
        copyBtn.textContent = "âœ… å·²è¤‡è£½";
        setTimeout(()=>copyBtn.textContent="ğŸ“‹ è¤‡è£½", 1200);
      }catch(err){
        alert("è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•é¸å–å…§å®¹å¾Œ Ctrl/Cmd + Cã€‚");
      }
    });

    /* ========== 7) æ¸…ç©ºç·¨è¼¯å™¨ ========== */
    clearBtn.addEventListener('click', ()=>{
      if(confirm("ç¢ºå®šè¦æ¸…ç©ºç·¨è¼¯å™¨å…§å®¹å—ï¼Ÿ")){ editor.value=''; preview.srcdoc=""; }
    });

    /* ========== 8) ç°¡æ˜“æ’ç‰ˆï¼šåƒ…åšç¸®æ’/æ¸…ç†ï¼ˆéåš´æ ¼ beautifyï¼‰ ========== */
    function simpleBeautify(html){
      // éåš´æ ¼ï¼šåƒ…åšåŸºæœ¬æ›è¡Œèˆ‡ç¸®æ’ï¼Œé¿å…ç ´å£ script å…§å®¹
      // è¨»è§£ï¼šè‹¥éœ€è¦æ›´å®Œæ•´çš„æ’ç‰ˆï¼Œå¯å†æ•´åˆç·šä¸Š formatterï¼›é€™è£¡ä¿æŒå–®æª”ç„¡å¤–éƒ¨ä¾è³´
      try{
        const lines = (html||'').split('\n');
        let indent=0, out=[];
        const openTag = /<([A-Za-z][^\s/>]*)[^>]*?(?<!\/)>/;
        const closeTag = /<\/\s*([A-Za-z][^>]*)>/;
        for(let raw of lines){
          let line = raw.trim();
          if(closeTag.test(line)){ indent = Math.max(0, indent-1); }
          out.push('  '.repeat(indent)+line);
          if(openTag.test(line) && !/\/>|<!|<meta|<link|<img|<input|<br/i.test(line)){ indent++; }
        }
        return out.join('\n');
      }catch(e){ return html; }
    }
    beautifyBtn.addEventListener('click', ()=>{
      editor.value = simpleBeautify(editor.value);
    });

    // é æ”¾ä¸€æ®µæç¤ºæ–‡å­—ï¼Œå¹«åŠ©æ–°æ‰‹ä¸Šæ‰‹
    editor.value = "<!-- åœ¨é€™è£¡è²¼ä¸Šä½ çš„ HTMLï¼Œæˆ–é»ã€è¼‰å…¥ç¯„ä¾‹ã€ï¼Œå†æŒ‰ã€åŸ·è¡Œã€é è¦½å§ï¼ -->";
  </script>
</body>
</html>
ä¾‹ã€ï¼Œå†æŒ‰ã€åŸ·è¡Œã€é è¦½å§ï¼ -->